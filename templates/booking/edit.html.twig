{# filepath: c:\laragon\www\Agence-de-location\templates\booking\owner\edit.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Éditer Réservation{% endblock %}

{% block body %}
<div class="container my-5">
    <h1><i class="fas fa-edit"></i> Éditer Réservation</h1>

    <div class="card mt-4">
        <div class="card-body">
            <form method="POST" class="row g-3">
                <div class="col-md-6">
                    <label class="form-label"><strong>Client:</strong></label>
                    <input type="text" class="form-control" value="{{ booking.userId.email }}" disabled>
                </div>

                <div class="col-md-6">
                    <label class="form-label"><strong>Annonce:</strong></label>
                    <input type="text" class="form-control" value="{{ booking.listingId.title }}" disabled>
                </div>

                <div class="col-md-6">
                    <label for="startDate" class="form-label">Date de Début</label>
                    <input type="datetime-local" id="startDate" name="startDate" class="form-control" 
                           value="{{ booking.startDate ? booking.startDate|date('Y-m-d\\TH:i') : '' }}" required>
                </div>

                <div class="col-md-6">
                    <label for="endDate" class="form-label">Date de Fin</label>
                    <input type="datetime-local" id="endDate" name="endDate" class="form-control" 
                           value="{{ booking.endDate ? booking.endDate|date('Y-m-d\\TH:i') : '' }}" required>
                </div>

                <div class="col-md-6">
                    <label for="phoneNumber" class="form-label">Numéro de Téléphone</label>
                    <input type="tel" id="phoneNumber" name="phoneNumber" class="form-control" 
                           value="{{ booking.phoneNumber ?? '' }}">
                </div>

                <div class="col-md-6">
                    <label for="status" class="form-label">Statut</label>
                    <select id="status" name="status" class="form-select" required>
                        <option value="pending" {% if booking.status == 'pending' %}selected{% endif %}>En attente</option>
                        <option value="approved" {% if booking.status == 'approved' %}selected{% endif %}>Approuvée</option>
                        <option value="rejected" {% if booking.status == 'rejected' %}selected{% endif %}>Rejetée</option>
                    </select>
                </div>

                <div class="col-12">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Sauvegarder
                    </button>
                    <a href="{{ path('owner_bookings') }}" class="btn btn-secondary">
                        <i class="fas fa-arrow-left"></i> Retour
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}